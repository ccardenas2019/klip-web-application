<!-- START row-->
<div bsModal tabindex="-1" role="dialog">
  <form [formGroup]="form" class="form-validate form-horizontal" novalidate="">
    <div class="row">
      <div class="col-lg-1"></div>
      <div class="col-lg-10">
        <!-- START card-->
        <div class="card card-default">
          <div class="card-body">
            <fieldset class="b0">
              <legend>{{title}} Publication</legend>
            </fieldset>
            <fieldset>
              <div class="form-group row">
                <label class="col-lg-2 col-form-label text-lg-right">Publication Title</label>
                <div class="col-lg-8">
                  <input class="form-control" type="text" formControlName="title" />
                  <span class="text-danger"
                    *ngIf="form.controls.title.errors?.required && (form.controls.title.dirty || form.controls.title.touched)">This
                    field is required</span>
                </div>
              </div>
            </fieldset>
            <fieldset>
              <div class="form-group row">
                <label class="col-lg-2 col-form-label text-lg-right">Description</label>
                <div class="col-lg-8">
                  <input class="form-control" type="text" formControlName="description" />
                  <span class="text-danger"
                    *ngIf="form.controls.description.errors?.required && (form.controls.description.dirty || form.controls.description.touched)">This
                    field is required</span>
                </div>
              </div>
            </fieldset>
            <fieldset>
                <label class="col-lg-2 col-form-label text-lg-right">Categories</label>
              <div class="col-lg-8">
                <ngx-select [defaultValue]= "arrayCatSel" [multiple]="true" [items]="arrayCat"
                  (selectionChanges)="refreshValue($event)" (remove)="remove()" placeholder="Select Categories"></ngx-select>
              </div>
              <div class="col-lg-8">
                  <i *ngFor="let cat of catSelected" class="fa fa-{{cat.icon}}" style="font-size:x-large; padding: 3px; text-shadow: 1px 1px 1px #cccccce8;" [style.color]="cat.color"></i>
              </div>
            </fieldset>
            <fieldset>
              <div class="form-group row">
                <label class="col-lg-2 col-form-label text-lg-right">Start Date-Time</label>
                <div class="col-lg-8">
                  <input type="text" class="form-control" formControlName="fecIni" #dp="bsDatepicker" bsDatepicker
                    [bsValue]="form.controls.fecIni.value" [bsConfig]="bsConfig">
                  <span class="text-danger"
                    *ngIf="form.controls.fecIni.errors?.required && (form.controls.fecIni.dirty || form.controls.fecIni.touched)">This
                    field is required</span>
                </div>
              </div>
            </fieldset>
            <fieldset>
              <div class="form-group row">
                <label class="col-lg-2 col-form-label text-lg-right">Due Date-Time</label>
                <div class="col-lg-8">
                  <input type="text" class="form-control" formControlName="fecFinal" #dp="bsDatepicker" bsDatepicker
                    [bsValue]="form.controls.fecFinal.value" [bsConfig]="bsConfig">
                  <span class="text-danger"
                    *ngIf="form.controls.fecFinal.errors?.required && (form.controls.fecFinal.dirty || form.controls.fecFinal.touched)">This
                    field is required</span>
                </div>
              </div>
            </fieldset>

            <fieldset hidden>
              <div class="form-group row">
                <label class="col-lg-2 col-form-label text-lg-right">Upload Date-Time</label>
                <div class="col-lg-8">
                  <input class="form-control" type="text" formControlName="fecUpload" />
                </div>
              </div>
            </fieldset>

            <!-- Requiered input field to save image buffer -->
            <fieldset>
              <input class="form-control" type="text" formControlName="image" hidden />

              <div class="form-group row">
                <label class="col-lg-2 col-form-label text-lg-right">Publication Image</label>
                <div class="col-lg-8">
                  <label for="imgUp" class="file-upload">
                    <button class="btn btn-secondary btn-block">Upload Image</button>
                    <input id="imgUp" type="file" ng2FileSelect [uploader]="uploader" (change)="previewImage()" />
                    <img *ngIf="publicationImage == null" width="100%" src="assets/img/upload-icon.png">
                  </label>

                  <div class="container">
                    <img class="image" *ngIf="publicationImage != null" [src]="publicationImage" (click)="showImage()">
                    <!-- <span class="zoom-img fas fa-pencil-alt" (click)="editTodo(i, $event)"></span> -->
                    <div class="zoom-img">
                      <span class="icon" (click)="showImage()">
                        <i class="fa fa-search-plus"></i>
                      </span>
                    </div>

                  </div>

                </div>
              </div>
            </fieldset>
          </div>
        </div>
      </div>
    </div>
    <!-- Buttons -->
    <div class="row">
      <div class="col-lg-12">
        <div class="card-footer text-center">
          <fieldset>
            <div class="d-flex justify-content-center">
              <button class="btn btn-secondary" (click)="closeModal()">Cancel</button>
              <button class="btn btn-primary" (click)="submitForm(form.value, true)">Save changes</button>
            </div>
          </fieldset>
        </div>
      </div>
    </div>
  </form>
</div>
